<div dir="rtl">
  <h1> Lists and Key </h1>
  <p>
      הדרך שלנו לדווח לריאקט על קשר בין אלמנט בין שני סבבים של render היא המאפיין key:
  </P>
  <p>
      1.)
      אנחנו יכולים להעביר מאפיין key לכל אלמנט ב Virtual DOM. מאפיין זה לא ממשיך למסך ותפקידו היחיד הוא לתת רמז לריאקט לגבי תפקיד האלמנט שמחזיק אותו.
  </p>
  <p>
      2.)
      כשיש אלמנט שיש לו מאפיין key שמופיע כמו שהוא במקום אחר על המסך אחרי render, ריאקט יעדיף להזיז את האלמנט כמו שהוא בשביל להתאים למקום החדש.
  </p>
  <p>
      3.)
      כשיש אלמנט שהיה לו מאפיין key לפני render, אבל אחרי render אין לנו אלמנט עם אותו key, ריאקט 
  </p>
</div>

# Examples for lists / key:
# 1.) Example for lists / key
```JS
import React from 'react';
import ReactDOM from 'react-dom';
import { useState } from 'react';
import _ from "lodash"

function CheckableList({items}) {
  const [selectedItems , setSelectedItems] = useState(new Set());
  const [key , setKey] = useState(0);

  function unselectAll() {
    setKey(key => !key);
    setSelectedItems(new Set());
  }

  function handlerOnChange(add , item) {
    add && selectedItems.add(item);
    !add && selectedItems.delete(item);
    setSelectedItems(new Set(selectedItems));
  }

  return (
    <>
      <button onClick={unselectAll}>Unselect all</button>
      <p>{Array.from(selectedItems).join(',')}</p>
      <ul key={key}>
          {items.map(item =>(
            <li key={item}>
                <label>
                    {item}
                    <input type="checkbox" onChange={(e)=>handlerOnChange(e.target.checked , item)}/>
                </label>
            </li>
            )
          )}
      </ul>
    </>
);
}


const App = () => {
  const [items, setItems] = useState(['one', 'two', 'three', 'four', 'five' ,'six' , 'seven' , 'height' , 'nine' , 'ten']);

  function shuffleItems() {
    setItems(_.shuffle(items));
  }

  return (
    <div>
      <button onClick={shuffleItems}>Shuffle</button>
      <CheckableList items={items}/>
    </div>
  );
};


// main.js
const root = document.querySelector('main');
ReactDOM.render(<App />, root);
```
# 2.) Example for lists / key
```JS
import React from 'react';
import ReactDOM from 'react-dom';
import { useState } from "react";

function SelectableList({ items , reset}) {
  const [selectedItems , setSelectedItems] = useState([]);
  const [showItems , setShowItems] = useState(items);
  

  function updateSelectedItem(add , item) {
    add  && setSelectedItems([...selectedItems , item]);
    !add && setSelectedItems(selectedItems.filter(i=> i !== item))
  }

  function deleteSelectedItemsFromShowItems() {
    setShowItems(items.filter(item => !selectedItems.includes(item)));
  }

  return (
    <>
      <button onClick = {deleteSelectedItemsFromShowItems}>Delete</button>
      <button onClick = {reset}>Reset</button>
      <ul>
        {showItems.map(item => (
          <li key={item}>
            <label>
              <input type="checkbox" checked={selectedItems.includes(item)}  onChange = { (e)=>updateSelectedItem(e.target.checked , item)}/>
              {item}
            </label>
          </li>
        ))}
      </ul>
    </>
  );
}


const App = () => {
  const items = ['one', 'two', 'three', 'four', 'five' , 'six' , 'seven' , 'height' , 'nine' , 'ten'];
  const [keyS , setKey] = useState(0);
  
  function reset() {
    setKey(keyS=> !keyS);
  }

  return (
    <div>
      <SelectableList key = {keyS} items={items} reset={reset}/>
    </div>
  )
};


// main.js
const root = document.querySelector('main');
ReactDOM.render(<App />, root);

```
# 3.) Example for lists / key
```JS
import React , { useState } from 'react';

function getSortedData(indexOfColumnAndDirection , data) {
    function sortMe(a , b) {
        if(indexOfColumnAndDirection.direction === 'up') return (a > b) ? -1 : (a < b) ? 1 : 0;
        return (a < b) ? -1 : (a > b) ? 1 : 0;
    }

    return [data[0]].concat(data.slice(1).sort((b , a) => {
        let itemA = a[indexOfColumnAndDirection.index];
        let itemB = b[indexOfColumnAndDirection.index];
        indexOfColumnAndDirection.index !== 0 && (itemA = itemA.toUpperCase() , itemB = itemB.toUpperCase());
        return sortMe(itemA , itemB);
    }));
}


export default function SortableTable({data}) {
    const [indexOfColumnAndDirection , setindexOfColumnAndDirection] = useState( {index: 0 , direction: ''} ) ;

    const sortedData = getSortedData(indexOfColumnAndDirection, data);

    function clickItemHandler(indexOfColumn) {
        const direction = indexOfColumnAndDirection.direction === 'up' ? 'down' : 'up';
        setindexOfColumnAndDirection( {index: indexOfColumn , direction: direction} ) ;
    }

    return (
        <table className= "table table-hover table-dark">
            <tbody>{
                sortedData.map ((row , i) =>
                    <tr key = {i}>
                        {
                            row.map((item , j) => 
                                <td key = {j} 
                                    onClick = { i === 0 ? () => { clickItemHandler(j) } : ()=>{}}>
                                    {item}
                                </td>
                            )
                        }
                    </tr>
                )
            }
            </tbody>    
        </table>
    );
}
```

<div dir="rtl">
  <h1> useRef </h1>
</div>

# How to use:
```JS
import { useState, useRef } from 'react'; // import

const divContainer = useRef(null); // definition

<div data-my-stuff="hello" data-my-name = "gita" ref={divContainer}> </div> //connect

function showMyThing() {

    const divDOM = divContainer.current; //DOMElement

    alert(`${divDOM.getAttribute("data-my-stuff")} ${divDOM.getAttribute("data-my-name")}`); //getAttribute

    alert(`${divDOM.dataset.myStuff} ${divDOM.dataset.myName}`); //dataset
    
}
```
# Examples for useRef
# 1.) Example for useRef
```JS
import React from 'react';
import ReactDOM from 'react-dom';
import { useState, useRef } from 'react';

import '../styles/main.scss';

const App = () => {
  const [word1, setWord1] = useState('');
  const [word2, setWord2] = useState('');
  const divContainer = useRef(null);
  const word2Ref = useRef(null);

  function showMyThing() {
    const divDOM = divContainer.current;
    alert(`${divDOM.getAttribute("data-my-stuff")} ${divDOM.getAttribute("data-my-name")}`);
    alert(`${divDOM.dataset.myStuff} ${divDOM.dataset.myName}`);
  }

  function setFirstWord(val) {
    setWord1(val);
    if(val.endsWith(' ')) {
        word2Ref.current.focus();
    }
  }

  function setSecondWord(val) {
    setWord2(val);
  }

  return (
    <div data-my-stuff="hello" data-my-name = "gita" ref={divContainer}>
      <button onClick={showMyThing}>Show My Thing</button>
      <input type="text" value={word1} onChange={(e) => setFirstWord(e.target.value)} />
      <input type="text" value={word2} onChange={(e) => setSecondWord(e.target.value)} ref = {word2Ref}/>
    </div>
  )
};

// main.js
const root = document.querySelector('main');
ReactDOM.render(<App />, root);
```

# 2.) Example for useRef:
```JS
const MultiSelectAndDeleteList = (props) => {
  const { items } = props;
  const [ visibleItems, setVisibleItems ] = useState(items);  
  const ulRef = useRef(null);

  function reset() {
    setVisibleItems(items);
  }

  function deleteSelected() {
      setVisibleItems([...ulRef.current.querySelectorAll('input:not(:checked)')].map(inp => inp.nextSibling.textContent));
  }

  return (
    <div>
      <button onClick={reset}>Reset</button>
      <button onClick={deleteSelected}>Delete</button>
      <ul ref = {ulRef}>
        {visibleItems.map(item => (
          <li key={item} >
            <label>
              <input type="checkbox" />
              {item}
            </label>
          </li>
        ))}
      </ul>
    </div>
  );
}

const App = () => {
  const items = ['one', 'two', 'three', 'four', 'five'];
  return (
    <div>
      <MultiSelectAndDeleteList items={items} />
    </div>
  )
};

// main.js
const root = document.querySelector('main');
ReactDOM.render(<App />, root);
```
<div dir="rtl">
  <h1> useEffect </h1>
  <pre>
        הפקדים שראינו עד עכשיו היו כולם סגורים בתוך העולם של ריאקט. הדינמיקה שלהם התחילה מאירוע, שגרם לשינוי בסטייט שבתורו גרם ל render מחדש וכך ראינו את השינוי על המסך. אבל הפקודה render מוגבלת רק לשינויים במה שאנחנו רואים על המסך בתוך העולם של פקדי ריאקט. הפקודה useEffect עליה נלמד בשיעור זה תתן לנו "לברוח" מהעולם של ריאקט כך ששינויים בסטייט ישפיעו על העולם החיצון.
  </pre>
  <pre>
      מה יש מחוץ לריאקט?
  </pre>
  <pre>
      1.) שורת הכותרת (ה title) בדפדפן נקבעת על ידי משתנה גלובאלי בשם document.title - משתנה שנמצא מחוץ לריאקט. בעזרת useEffect נוכל לחבר שינויים בסטייט כך שיגרמו באופן אוטומטי לשינויים במשתנה זה, וכך משתנה מהסטייט ישפיע על כותרת המסמך בדפדפן.
  </pre>
  <pre>
      2.) שילוב API חיצוני בתוכנית (לדוגמא YouTube API) הוא מנגנון חיצוני לריאקט. בעזרת useEffect נוכל לחבר משתנה מהסטייט לדוגמא למזהה סרט מוטמע מ YouTube, וכך בעקבות שינוי בסטייט באופן אוטומטי הסרט יוחלף.
  </pre>
  <pre>
      3.) הרבה פעמים נשתמש ב useEffect כדי להתחיל פעולה אסינכרונית באופן אוטומטי בעקבות שינוי בסטייט. בצורה כזו לא משנה מאיזה מקום משתנה הסטייט עודכן, הפעולה האסינכרונית תתחיל בכל מקרה ברגע הנכון.
  </pre>
  <pre>
      4.) מעבר להשפעה על העולם החיצון ל useEffect יש מנגנון פעולה ייחודי שמאפשר לזהות את הפעם הראשונה שריאקט מפעיל render על הפקד שלכם, ולכן נוכל להשתמש בו גם עבור קוד איתחול - לדוגמא לאתחל Timer כשפקד מסוים נכנס לעמוד.
  </pre>
</div>